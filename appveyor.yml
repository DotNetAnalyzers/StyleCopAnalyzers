version: 1.0.{build}
os: Visual Studio 2017
init:
- git config --global core.autocrlf true
install:
before_build:
- nuget restore
build:
  project: StyleCopAnalyzers.sln
  verbosity: minimal
test_script:
- ps: build\opencover-report.ps1
- "SET PATH=C:\\Python34;C:\\Python34\\Scripts;%PATH%"
- pip install codecov
- codecov -f "StyleCopAnalyzers_coverage.xml"
# preserve "packages" directory in the root of build folder but will reset it if packages.config is modified
cache:
  - '%USERPROFILE%\.nuget\packages -> **\*.csproj'
artifacts:
- path: 'StyleCop.Analyzers\**\*.vsix'
- path: 'StyleCop.Analyzers\**\*.nupkg'
