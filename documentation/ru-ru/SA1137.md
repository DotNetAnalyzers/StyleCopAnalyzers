## SA1137

<table>
<tr>
  <td>TypeName</td>
  <td>SA1137ElementsShouldHaveTheSameIndentation</td>
</tr>
<tr>
  <td>CheckId</td>
  <td>SA1137</td>
</tr>
<tr>
  <td>Категория</td>
  <td>Правила удобочитаемости</td>
</tr>
</table>

:memo: Это правило является новым для **StyleCop Analyzers**, и его не было в **StyleCop Classic**.

## Причина

Два родственных элемента, каждый из которых начинается в своей собственной строке, имеют разные уровни отступа.

## Описание правила

Нарушение этого правила происходит, когда два или более родственных элемента каждый из которых начинается в своей строке, не имеют одинакового отступа.

Например, следующий код приведет к нарушению этого правила:

```csharp
public void MethodName()
{
    A();
   B(); // SA1137: Ожидается, что отступ будет соответствовать предыдущей строке
}
```

Следующий код не приведет к каким-либо нарушениям:

```csharp
public void MethodName()
{
    A();
    B();
}
```

Обратите внимание, что этим правилом не проверяются относительные отступы и отступы в независимых родственных группах. В следующем коде показан более сложный пример, который не приводит к каким-либо нарушениям.

```csharp
public void Method1()
{
    A();
    B();
}

public void Method2()
{
        A();
        B();
}

public void Method3()
{
A();
B();
}

public void Method4()
    {
    A();
    B();
    }
```

### Атрибуты

Списки атрибутов оцениваются этим правилом как отдельные элементы на том же уровне, что и элемент, к которому они применяются.
Однако при определении ожидаемого отступа для родственных элементов списки атрибутов имеют более низкий приоритет. Другими словами, первый элемент в рамках одной группы, который начинается в своей собственной строке, если такой существует, определяет ожидаемый отступ для группы. Если такого элемента нет, то вместо него используется отступ первого атрибута в списке атрибутов. Например, следующий код показывает места, где SA1137 сообщает о нарушении отступа относительно списков элементов.

```csharp
  [Obsolete]                // SA1137 (ожидается отсутствие отступов)
public void Method()        // OK (эта строка устанавливает отступ для группы)
{
}

  public Task MethodAsync() // SA1137 (ожидается отсутствие отступов)
    {                       // OK (не является частью анализируемой группы)
    }
```

В следующем примере показан случай, когда отступ списка атрибутов *используется* для группы.

```csharp
public void Method(int x,   // Игнорируется (параметр не начинается в своей собственной строке)
    [In] int y,             // OK (эта строка устанавливает отступ для группы)
      [In] int z)           // SA1137
{
}
```

### Метки

Метки, появляющиеся в операторе блока, оцениваются особым образом. Ожидается, что каждая метка в блоке будет иметь одинаковый отступ, даже если этот отступ отличается от отступа, используемого в операторах внутри блока.
Конкретный отступ меток относительно других операторов для этого правила не рассматривается.

В следующем примере показан блок с операторами и метками.

```csharp
public int MethodName()
{
    int x;

  beginning:    // OK (отступ метки может отличаться от других операторов)
     x = 3;     // SA1137 (должен быть отступ в четыре пробела, чтобы соответствовать 'int x;' выше)

end:            // SA1137 (должен быть отступ в два пробела, чтобы соответствовать 'beginning:' выше)
    return x;
}
```

Внутри оператора `switch` метки `case` и `default` образуют дополнительную категорию. В этом случае действуют следующие правила:

1. Метки `case` и `default` в операторе `switch` должны использовать одинаковый отступ.
2. Другие метки в операторе `switch` должны использовать тот же отступ (но он может отличаться от отступа меток `case`).
3. Операторы в операторе `switch` должны использовать одинаковый отступ (но он может отличаться от обоих вышеперечисленных вариантов).

## Как исправить нарушения

Чтобы исправить нарушение этого правила, скорректируйте отступы родственных элементов, чтобы они соответствовали друг другу.

## Как подавить нарушения

```csharp
class TypeName { }

#pragma warning disable SA1137 // Элементы должны иметь одинаковый отступ
  class Indented { }
#pragma warning restore SA1137 // Элементы должны иметь одинаковый отступ
```